<!DOCTYPE html>
<html>
    <head>
        <!-- Required meta tags always come first-->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <!-- include bootstrap css-->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
        />
        <link rel="stylesheet" href="style/styles.css" />
        <title>News Crawling WebPage App</title>
        <script src="crawler/news_urls.js"></script>
        <script src="entire_news_list.js"></script>
        <script>
            const axios = require("axios");
            const cheerio = require("cheerio");
        </script>
        <script src="crawler/get_news_src.js"></script>
        <script src="crawler/crawling_bbc_business.js"></script>
        <script src="crawler/crawling_bbc_sci.js"></script>
        <script src="crawler/crawling_bbc_tech.js"></script>
        <script src="crawler/crawling_bbc_world.js"></script>
        <script src="crawler/crawling_naver_business.js"></script>
        <script src="crawler/crawling_naver_tech.js"></script>
        <script src="crawler/crawling_naver_world.js"></script>
        <script src="crawler/crawling_wsj_business.js"></script>
        <script src="crawler/crawling_wsj_tech.js"></script>
        <script src="crawler/crawling_wsj_world.js"></script>
        <script>
            async function test_async(f1, f2, f3, f4, f5, f6, f7, f8, f9, f10) {
                await f1();
                await f2();
                await f3();
                await f4();
                await f5();
                await f6();
                await f7();
                await f8();
                await f9();
                await f10();
                return new Promise((resolve, reject) => {
                    resolve(entire_news_lists);
                });
            }
            test_async(
                getNewsList_bb,
                getNewsList_bs,
                getNewsList_bt,
                getNewsList_bw,
                getNewsList_nb,
                getNewsList_nt,
                getNewsList_nw,
                getNewsList_wb,
                getNewsList_wt,
                getNewsList_ww
            ).then((elem) => console.log(elem.bbc.tech));
        </script>
    </head>
    <body style="background-color: rgb(237, 253, 224)">
        <div id="title">
            <h1 class="text-center">
                <i class="bi bi-newspaper"></i> News Crawling Lists
            </h1>
        </div>
        <div id="news_list">
            <div
                class="
                    bg-light
                    p-1
                    rounded-2
                    ps-1
                    d-flex
                    align-items-center
                    border
                    mt-2
                "
            >
                <span class="me-auto fs-2">
                    <img src="images/bbc_icon.png" class="image" />
                    "bbc_news_title"
                </span>
                <button class="btn btn-sm btn-success me-1">
                    <i class="bi bi-eye" style="font-size: large"></i>
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="bi bi-eye-slash" style="font-size: large"></i>
                </button>
            </div>

            <div
                class="
                    bg-light
                    p-1
                    rounded-2
                    ps-1
                    d-flex
                    align-items-center
                    border
                    mt-2
                "
            >
                <span class="me-auto fs-2">
                    <img src="images/wsj_icon.jpg" class="image" />
                    "wsj_news_title"
                </span>
                <button class="btn btn-sm btn-success me-1">
                    <i class="bi bi-eye" style="font-size: large"></i>
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="bi bi-eye-slash" style="font-size: large"></i>
                </button>
            </div>

            <div
                class="
                    bg-light
                    p-1
                    rounded-2
                    ps-1
                    d-flex
                    align-items-center
                    border
                    mt-2
                "
            >
                <span class="me-auto fs-2">
                    <img src="images/naver_icon.png" class="image" />
                    "naver_news_title"
                </span>
                <button class="btn btn-sm btn-success me-1">
                    <i class="bi bi-eye" style="font-size: large"></i>
                </button>
                <button class="btn btn-sm btn-danger">
                    <i class="bi bi-eye-slash" style="font-size: large"></i>
                </button>
            </div>
        </div>

        <!-- .html 파일에서 node.js 모듈을 쓸 수 있는지 확인 (electron 이용해야만 가능.)-->
        <div id="elec_node_text"></div>
        <!-- papago 번역 test.-->
        <script src="translater/translater.js"></script>

        <script>
            // news format
            let news = {
                title: '"news title"',
                portal: "naver",
                type: "tech",
                context: "context",
            };

            function addNews(news) {
                let div = document.createElement("div");
                div.className =
                    "bg-light p-1 rounded-2 ps-1 d-flex align-items-center border mt-2";

                let img = document.createElement("img");
                img.className = "image";
                if (news.portal == "naver") {
                    img.src = "images/naver_icon.png";
                } else if (news.portal == "bbc") {
                    img.src = "images/bbc_icon.png";
                } else if (news.portal == "wsj") {
                    img.src = "images/wsj_icon.png";
                }
                let span = document.createElement("span");
                span.className = "me-auto fs-2";
                span.appendChild(img);
                span.innerHTML += news.title;
                div.appendChild(span);

                /* buttontoSee */
                let buttontoSee = document.createElement("button");
                buttontoSee.className = "btn btn-sm btn-success me-1";
                buttontoSee.innerHTML =
                    '<i class="bi bi-eye" style="font-size: large"></i>';
                div.appendChild(buttontoSee);
                buttontoSee.addEventListener("click", () => {
                    /* 
                    news_list div 안의 contents 저장 후
                    news.context 보여줌

                    저장할 필요가 없나? entire_news_list 에 저장되어있으니
                    */
                });

                /* buttonRemove */
                let buttonRemove = document.createElement("button");
                buttonRemove.className = "btn btn-sm btn-danger";
                buttonRemove.innerHTML =
                    '<i class="bi bi-eye-slash" style="font-size: large"></i>';
                div.appendChild(buttonRemove);
                buttonRemove.addEventListener("click", () => {
                    div.remove();
                    /* entire news list 에서 제외 */
                });

                let newslist = document.querySelector("#news_list");
                newslist.appendChild(div);
            }

            function loadNews() {
                // entire news list handler
                // using addNews()
                addNews(news);
            }

            loadNews();
        </script>
    </body>
</html>
